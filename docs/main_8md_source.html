<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FastArduino: /home/jfpoilpret/electronics/fast-arduino-lib/dox/main.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FastArduino
   </div>
   <div id="projectbrief">C++ library to build fast but small Arduino/AVR projects</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('main_8md.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/home/jfpoilpret/electronics/fast-arduino-lib/dox/main.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;FastArduino Documentation  {#index}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;=========================</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;Welcome to FastArduino documentation!</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;FastArduino is a C++ object-oriented library for Arduino boards based on AVR MCU and also bare AVR MCU. FastArduino:</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;- provides smaller and faster code than other libraries for the same functionality</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;- ensures you pay (size and speed) only for what you use</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;- uses Object-Oriented Design</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;- reduces risk of bad code by performing extensive compile-time checks</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;- supports event-driven programs</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;- supports both ATmega and ATtiny chips</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;FastArduino implementation:</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;- is based on C++17 standard</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;- favours C++ templates rather than virtual methods whenever possible</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;- virtual methods are used only when needed (mostly for event handlers)</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;- never automatically registers any ISR but requires explicit registration through provided macros</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;The rest of this guide provides indications where to start and proceed with learning how to use FastArduino for your projects.</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;Building FastArduino</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;--------------------</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;First off, ensure your Linux box contains the ATmel AVR 8 bit toolchain and your `$PATH` points to its `bin` directory.</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;The following commands show how to build the FastArduino library:</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    &gt; git clone https://github.com/jfpoilpret/fast-arduino-lib.git</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    &gt; cd fast-arduino-lib</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    &gt; make CONF=UNO build</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;This creates the FastArduino library, built for Arduino UNO, into `dist/UNO-Release/AVR-GNU-Toolchain-3.5.3-Linux/libfastarduino.a`).</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;Note that `make` builds one version of FastArduino library for a specific target, that target is specified with `CONF=&lt;target&gt;`. The currently supported targets are:</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;- UNO: Arduino UNO</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;- NANO: Arduino NANO</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;- LEONARDO: Arduino LEONARDO</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;- MEGA: Arduino MEGA</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;- ATmega328-8Mhz: bare ATmega328P MCU at 8 MHz</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;- ATmega328-16MHz: bare ATmega328P MCU at 16 MHz</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;- ATtinyX4-8MHz: bare ATtinyX4 MCU at 8 MHz</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;- ATtinyX5-8MHz: bare ATtinyX5 MCU at 8 MHz</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;Building a project using FastArduino</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;------------------------------------</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;One simple way to start a project using FastArduino is probably to use [Visual Studio Code](https://code.visualstudio.com/), first setup as described [here](https://github.com/jfpoilpret/fast-arduino-lib/blob/master/ArduinoDevSetup.docx).</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;Then you can use [FastArduino Project Template](https://github.com/jfpoilpret/fastarduino-project-template) to create your first project (just follow instructions in that repository).</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;Your project shall have at least one &quot;.cpp&quot; source file with an `int main()` function, as shown in the [tutorial](tutorial.html). The FastArduino Project Template includes this source file already.</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;That FastArduino project template also supports building from a Linux shell:</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    &gt; $ make CONF=UNO</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    &gt; $ make flash CONF=UNO</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;The first `make` builds your program for the target specified with `CONF=...`.</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;The second `make` uploads the built program to the Flash memory of the target MCU.</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;The `make` command takes optional arguments that help you specify how to upload to your MCU target, among a set of ways, and through which USB port.</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;FastArduino library organisation</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;--------------------------------</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;FastArduino library is organized in a sinple directory structure:</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;- **fastarduino**: contains &quot;core&quot; FastArduino source files, handling all AVR MCU internal parts: Digital Input/Output, Timers, Analog-Digital Converters, Interrupts, I2C, SPI, Watchdog, UART...</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    - **boards**: contains MCU target specific files, defines as &quot;traits&quot;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    - **devices**: contains source code to implement support for various external devices, such as DS1307 RTC chip, HC-SR04 ultrasonic range sensor, NRF24L01+ Radio-frequency chip, Servomotor drives...</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;Most of the library&#39;s source code is inside `.h` header files, only a small part of it is in `.cpp` files. This is due to heavy C++ template usage which requires most source code to be present on header files.</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;All FastArduino source code is defined inside namespaces, in order to avoid names conflicts across programs. Namespaces can include sub-namespaces in some occasions. Namespaces are organized as follows:</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;- [analog](namespaceanalog.html): contains the API to handle analog input and &quot;pseudo-analog&quot; output (PWM).</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;- [containers](namespacecontainers.html): utility API to handle useful containers such as linked lists and queues; those are internally used by some FastArduino API but you can use them in your own programs as well.</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;- [devices](namespacedevices.html): this namespace is used for all devices external to the MCU itself; most devices API comes in a sub namespace:</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    - [audio](namespacedevices_1_1audio.html): API for tone generation to buzzers or small audio amplifiers</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    - [magneto](namespacedevices_1_1magneto.html): API for magnetometers, gyroscopes, accelerometers</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    - [rf](namespacedevices_1_1rf.html): API for radio-frequency chips</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    - [rtc](namespacedevices_1_1rtc.html): API for real time clock chips</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    - [servo](namespacedevices_1_1servo.html): API to handle servomotors</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    - [sonar](namespacedevices_1_1sonar.html): API to handle sonar range sensors</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;- [eeprom](namespaceeeprom.html): contains the API to handle read and write to and from the internal MCU EEPROM.</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;- [errors](namespaceerrors.html): all errors that can be returned by FastArduino API are defined here as constants.</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;- [events](namespaceevents.html): this namespace defines general event handling that can be used in your programs. Most FastArduino are able to generate events on specific conditions. This namespace also contain the scheduler API which permits scheduling of jobs at specific times or periods.</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;- [flash](namespaceflash.html): contains the API to handle read of data from the internal MCU flash memory; this is particular useful in order to reduce SRAM storage when dealing with constant strings.</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;- [gpio](namespacegpio.html): that namespace deals with all API to manage digital input and outputs.</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;- [i2c](namespacei2c.html): that namespace contains all API to deal with I2C (also known as *Two Wires Interface*), including a base class to help you define support for new devices based on I2C protocol.</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;- [interrupt](namespaceinterrupt.html): this namespace implements the concepts of managing all interrupts within FastArduino; it also contains the API dedicated to handling AVR interrupt pins, either Pin Change Interrupt pins or External Interrupt pins.</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;- [power](namespacepower.html): contains the API to handle AVR power modes.</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;- [serial](namespaceserial.html): contains the API to handle serial communication; sub namespaces definespecific API for hardware or software based serial communication:</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    - [hard](namespaceserial_1_1hard.html): this namespace support AVR embedded UART (for ATmega MCU only, as ATtiny do not have this feature)</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    - [soft](namespaceserial_1_1soft.html): this namespace supports software UART (for all MCU); software serial is less efficient and bigger in code size than its hardware equivalent</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;- [spi](namespacespi.html): that namespace deals with all API to deal with SPI interface, including a base class to help you define support for new devices based on SPI protocol.</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;- [streams](namespacestreams.html): this namespace provide a C++ streams like API for input and output (used by serial UART API).</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;- [time](namespacetime.html): provides API to delay your program for some amount of time (through busy loops) and a few more API to deal with time data.</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;- [timer](namespacetimer.html): defines a basic API to deal with MCU timers and their available operation modes, more specific API to use timers for generating pulses, generating square waves, and an API dedicated to track real time through MCU timers, with microsecond precision.</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;- [utils](namespaceutils.html): provides general utilities that did not pertain to any other namespace; many of these utilities allow easy conversion of values between two referentials or &quot;encoding&quot;.</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;- [watchdog](namespacewatchdog.html): this namespace defines an API to deal with MCU watchdog timer as a way </div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;In addition to all namespaces above, there is one omnipresent namespace `board` that defines all configuration (list of digital &amp; analog pins, timers...) specific to an MCU target. The documentation for this namespace depends on the MCU target, as described [here](supportedboards.html).</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;As you can see, all namespaces in FastArduino are 100% lowercase by convention.</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;However, please note that FastArduino defines a few specific namespaces, which names start with an uppercase letter, and whose sole purpose is to scope a set of constants. As an example, namespace `events` defines such a sub namespace `Type` which defines all predefined event types as `uint8_t` constants. The reason why `Type` was not defined as an enum class is that it is possible for you to define new types of events, which would not be possible if using an enum.</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;FastArduino is **heavily** based on C++ templates as you will see when developing with it. Although many people will tell you that &quot;C++ templates are evil and generate bloated code, they are not for embedded&quot;, don&#39;t believe them! C++ templates, when properly used, bring many advantages without the abovementioned &quot;drawback&quot;.</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;One downside of templates is its syntax, that may sound less familiar to many developers, but that should not be a barrier against its use.</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;In FastArduino, templates offer a huge advantage over competing libraries: type-safety is guaranteed at compile-time whatever the MCU/Arduino board target of your program: for instance, it is **not possible**, with FastArduino, to compile a program that would try to access an IO pin that does not exist on the target; most other libraries I know allow you to do that without complaining.</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;Finally, regarding FastArduino organization, it is important to note that a special concept has been developed to deal with interrupt vectors. The rationale behind the concept is that FastArduino will **never** register an interrupt vector by itself; instead it provides you specific macros for all kinds of interrupt vectors that will generate proper ISR functions, including type-safety checks embedded in the macro. The major advantage of that is that you will never have libraries competing for the same ISR, as is often the case when using Arduino API. This point is further detailed in [FastArduino ISR Handling](interrupts_8h.html#details).</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;Discovering FastArduino API step by step</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;----------------------------------------</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;The best way to discover FastArduino is to follow [this tutorial](tutorial.html).</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>main.md</b></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
